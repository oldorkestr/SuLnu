@model SuLnu.Models.PagedViewModel

@{
    ViewData["Title"] = "News";
}
<html>
<head>
    <link rel="stylesheet" href="~/css/allNews.css" />

</head>
<body>
    <div class="container-fluid">
        <div class="row justify-content-start align-items-start">
            <p>
                <a id="back" class="fa fa-arrow-circle-left fa-x" href="~/Home/Index">Back</a>
            </p>

        </div>

        <div class="row justify-content-center align-items-center">
            <p>
                <a asp-action="CreateNews" id="create-news">Create News</a>
            </p>

        </div>
            
       
    </div>
   

    @using (Html.BeginForm())
    {
        <div class="container-fluid">

            <div class="row justify-content-center align-items-center">
                <p> @Html.DropDownList("filterString", ViewBag.faculties as SelectList, "------------Select filter------------", new { @style = "width: auto; height: 35px; padding: 0; border-radius: 5px; background-color: rgb(44, 12, 88, 0.5);", onchange = "this.form.submit();" })</p>
            </div>

            <div class="sort">
                <p>
                    @Html.ActionLink("Date", "AllNews", new { sortOrder = ViewBag.DateSortParam, currentFilter = ViewBag.CurrentFilter, @style = "" })
                    @Html.ActionLink("Name", "AllNews", new { sortOrder = ViewBag.NameSortParam, currentFilter = ViewBag.CurrentFilter })
                </p>
            </div>
        </div>      
        

    }
    <div class="container ">
        <div class="row">
            @{
                int count = 1;
            }
            @foreach (var item in Model.News)
            {
                var numb = 4;
                if (count % 3 == 0)
                {
                    numb = 3;
                }
                <div class="my-3 m-3 col-lg-@numb col-md-6 col-sm-12 col-12  news">
                    <img src="@item.PhotoFilePath" style="width:inherit; height:inherit">
                    @{
                        var date = item.CreationDate;
                    }
                    <p class="date">@date.ToString("MMMM") @date.Day, @date.Year</p>
                    <h3 class="font-weight-bold align-self-lg-center">@Html.DisplayFor(modelItem => item.Tilte)</h3>
                    <p class="likes"><i class="far fa-heart "></i> @item.NumberOflikes </p>
                    <p class="font-weight-light faculty">@item.FacultyName</p>
                </div>
                count += 1;
            }
        </div>
    </div>
    <h2>&nbsp;</h2>
    <div class="row">
        <div class="col-12 text-center">
            <div class="pagination">
                @using (Html.BeginForm("AllNews", "News", FormMethod.Post))
                {
                    @for (int i = 1; i <= Model.PageCount; i++)
                    {
                        @if (i != Model.CurrentPageIndex)
                        {
                            @Html.ActionLink($"{i}", "AllNews", "News", new { page = i })
                        }
                        else
                        {
                            <a class="active">@i</a>
                        }
                    }
                }
                <h2>&nbsp;</h2>
                <h2>&nbsp;</h2>
            </div>
        </div>
    </div>
</body>
</html>